<%= render 'layouts/header'%>
<section class="banner-main athletics-packages-banner">
	<div class="container">
		<div class="row">
			<div class=" pad_none banner-inner">
				<h2 class="fadeInUp wow" data-wow-duration="2s" data-wow-delay="0s"> &nbsp;</h2>
			</div>
		</div>
	</div>
	<div class="gold-cost-right" >
		<img src="/assets/images/gold-cost-img.png" alt="">
	</div>
</section>

<br style="clear: both;" />
<!-- <div class="container" style="padding: 40px 0px;">
	<div class="row">
		<div class="col-md-12" style="margin-top: 30px;">
			<div class="col-md-3" style="text-align: left;">
				<img src="/assets/images/ksg-logos/red.png" style="height: 240px; border: 3px solid white; box-shadow: 2px 3px 15px #888888;">
			</div>
			<div class="col-md-9" style="text-align: right;">
				<div class="col-md-12" style="border-bottom: 1px solid #cccccc; padding: 10px 0px 15px 0px;">
					<div class="col-md-12" style="text-align: left;">
						<div style='color: #1d8337; font-family: "proxima_novaregular"; font-size: 30px; font-weight: bold;'>Athletics Supporter Program  Gold</div>
					</div>
					<br style="clear: both;" />
				</div>
				<div class="col-md-12" style="text-align: left;">
					<h5 style='color: #212121; font-family: "proxima_nova_condensedlight"; font-size: 20px; font-weight: bold;'>
						Package code - AT_GOLD
					</h5>
					<p style='color: #212121; font-family: "proxima_nova_condensedlight"; font-size: 15px;'>
						<strong>Price: </strong> FROM $4,973 / ï¿½3,158 For 9 Nights (per person based upon twin or double share). <br />
						Single also available. <br />
					</p>
				</div>
			</div>
			<br style="clear: both;" />
		</div>
	</div>
</div> -->
<section style="position: relative;">
	<img src="/assets/images/tour2-design-bgnw.png" class="tour2-design-bgnw" alt="">
	<div class="container" style="padding: 40px 0px;">
		<div class="row" style="margin-top: 30px;">
			<div class="col-md-12" style="background-color: #fff; box-shadow: 2px 2px 1px 2px lightgrey;">
				<div id="accordion" role="tablist" aria-multiselectable="true">

				  <div class="card">
				    <div class="card-header" role="tab" id="headingTwo">
				      <h5 class="mb-0">
				        <a class="collapsed" data-toggle="collapse in" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" style="font-size: 18px;">
				          Filter
				        </a>
				      </h5>
				    </div>
				    <div id="collapseTwo" class="collapse in" role="tabpanel" aria-labelledby="headingTwo">
				      <div class="card-block">
								<div class="row" style="padding-bottom: 20px;">
									<div class="col col-md-12 col-sm-12 col-xs-12">
										<h3>Filter by</h3>
										<form class="form event_change" action="" method="post" id="change_category">
											<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
											<div class="col-xs-5 select_event">
												<select class="form-control required" name="event_name" required="true" id="event_name">
													<option value="">Select Event</option>
													<option value="Athletics">Athletics</option>
													<option value="Netball">Netball</option>
													<option value="Swimming">Swimming</option>
													<option value="Rugby+Sevens">Rugby</option>
													<option value="Opening+Ceremony">Opening Ceremony</option>
												</select>
											</div>
											<div class="col-xs-5 select_category">
												<select class="form-control category_name required" name="category" required="true">
													<option value="">Select Category</option>
												</select>
											</div>
											<div class="col-xs-2">
												<button type="submit" name="button" id="submit_event" class="btn btn-primary" style="background-color: #F5BA13; box-shadow: 0 3px 0 0 #a1790c;
    border: 0 none; color: #000; width: 100%; margin-bottom: 10px;">Submit</button>
											</div>
										</form>

									</div>
									<!-- <div class="col col-md-3 col-sm-3 col-xs-3">
										<h3>Sort by</h3>
										<select class="form-control" name="">
											<option value="">Choose</option>
											<option value="">Date</option>
											<option value="">Price</option>
											<option value="">Availability</option>
										</select>
									</div> -->
								</div>
				      </div>
				    </div>
				  </div>

				</div>

			</div>
		</div>
		<hr>
		<div class="">

			<% @event.each do |f| %>
			<% if f['Hotel'].blank? %>

			<%else%>

				<div class="row row_med" style="margin-top: 30px; display:flex;">
					<div class="col col-md-10 col-sm-10 col-xs-12">
						<div class="row" style="background-color:#dcdcdc; padding:15px; border:1px solid #cbcac9; display:flex; border-top-left-radius: 2px; border-bottom-left-radius: 2px;" >


								<% f['Hotel'].each do |hotel| %>
										<div class="col col-md-6">
											<div class="">
												<p style="margin-bottom:5px; margin-left:-15px; color:#5f5e5f;" class="hotel_i"><img src="/assets/images/hotel_icon.png" height="25px" width="25px" alt=""> Hotel</p>
											</div>
											<div class="row" style="background-color: #fff;padding-top: 10px;box-shadow: 0px 0px 2px 0px;height: 210px;display:flex;">
												<div class="col col-sm-5 col-xs-5 ibf" style="padding-right:0px; height:100%;">
													<% if hotel['photo'].blank? %>
														<img src="/assets/No_image_found.jpg" alt="" style="height:94%; width:90%; object-fit: cover;">
													<% else %>
														<img src="<%= hotel['photo'].split(',').first %>" alt="" style="height:94%; width:90%; object-fit: cover;">
													<% end %>
													<!-- <img src="/assets/images/artique-resort-hotel023.jpg" alt="" style="height:auto; width:75%;"> -->
													<!-- <a href="#"> <h5 style="padding-left:15%;">View details</h5></a> -->
												</div>
												<div class="col col-sm-7 col-xs-7" style="padding-left: 0px;">
													<h3 style="margin-top:0px;"><%= hotel['Hotelname'] %></h3>
													<!-- <p style="color:#696969;">hotel details</p> -->
													<span>
														<i class="fa fa-star sim-stars" aria-hidden="true" style="color:#F5BA13;"></i>
														<i class="fa fa-star sim-stars" aria-hidden="true" style="color:#F5BA13;"></i>
														<i class="fa fa-star sim-stars" aria-hidden="true" style="color:#F5BA13;"></i>
														<i class="fa fa-star sim-stars" aria-hidden="true" style="color:#F5BA13;"></i>
														<i class="fa fa-star-half-o sim-stars" aria-hidden="true" style="color:#F5BA13;"></i>
													</span><br>
													<h5><b>Package Type:</b> <%= f['PackageType'].titleize %></h5>
													<h5><b>Event Type:</b> <%= f['EventType'].titleize %></h5>
													<h5><b>Room type:</b> <%= hotel['Room_type']%></h5>
													<!-- <button type="button" name="button" class="btn btn-primary change_hotel">Change hotel</button> -->
													<% if hotel['description'].blank? %>
													<%else%>
														<!-- <details>
															<summary>Hotel Description</summary>
															<%= hotel['description'] %>
														</details> -->
														<a href="/hotel_detail/<%= hotel['Hotelname'] %>"><button type="button" class="btn btn-primary" name="button">Hotel info</button></a>
														<!-- <button type="button" name="button" class="btn btn-primary">Detail</button> -->
													<%end%>
												</div>
											</div>
										</div>
								<% end %>



							<img src="/assets/plus_rev.png" alt="plus" id="plus" height="30px" width="30px"style="position: absolute;top: 46%;z-index: 9999;left: 49%;">
							<!-- <i class="fa fa-plus fa-2x" style="position: absolute;top: 44%;z-index: 9999999999999;left: 49%;"></i> -->
							<div class="col col-md-6" >
								<div class="">
									<p style="margin-bottom:4px; color:#5f5e5f;" class="event_i"><img src="/assets/images/man_runn.png" height="25px" width="25px" alt=""> Events </p>
								</div>
								<div class="row" style="background-color: #fff;box-shadow: 0px 0px 2px 0px;  margin-left: 0px;">

									<div class="col col-sm-12 col-xs-12" style="height:211px; overflow-y:scroll;">
										<!-- <h5>Events: </h5> -->
										<ul class="list-group" style="margin-top: 15px;">

											<% f['Event'].each do |eve| %>
												<li class="list-group-item" style="border: 0px !important;"><img src="<%= @pic %>" alt="" height="20px" style="border-radius: 20px;">&ensp; <%= eve['Name'] %> &ensp; <%= eve['Date'] %>  <a href="#" class="pull-right" data-toggle="tooltip"  data-placement="left" data-html="true" title="<p><b>Event</b>: <%= eve['Name'] %> <br> <b>Date:</b> <%= eve['Date'] %> <br> <b>Time:</b> <%= eve['start_time'] %> - <%= eve['end_time'] %> </p>" style="z-index:9999; position:absolute;right: 8px; "><span class="badge" style='padding-left: 8px; padding-top: 4px;'>i</span></a></li>
											<% end %>
										</ul>
									</div>
								</div>
								<img src="/assets/equal_to.png" alt="equalTo" class="equalTo" height="30px" width="30px" style="position: absolute;top: 45%;z-index: 9999;right: -5%;-webkit-transform: rotate(90deg);
				-moz-transform: rotate(90deg);
				-o-transform: rotate(90deg);
				-ms-transform: rotate(90deg);
				transform: rotate(90deg);">
								<!-- <i class="fa fa-pause fa-2x fa-rotate-90" style="position: absolute;top: 45%;z-index: 999999999;right: -5%;"></i> -->
							</div>

						</div>

					</div>

					<div class="col col-md-2 col-sm-2 col-xs-12 irg" >
						<div class="right_view" style="margin-top: 35%;">

							<h3 class="top_rem" style="text-align:right; color:green;">AUD <%= f['Amount']%></h3>
							<p style="text-align:right;">Max Person: <% amx = []%><% f['Hotel'].each do |max_p| %><% amx.push(max_p['max_people'])%><% end %> <%= amx.max %></p>
						</div>

						<% if @current_user.present? %>
							<button type="button" data-item_uid='<%= f['id'] %>'  class="btn pull-right Package_in" style="background-color:#F5BA13;box-shadow: 0 3px 0 0 #a1790c;border: 0 none;color: #000;width: 100%;margin-bottom:10px;margin-bottom: 10px;" ><i class="fa fa-cart-plus" aria-hidden="true"></i> Add to cart</button><br>
							<a href="/stats/<%= @category_name %>/<%= @event_name %>"><button type="button" name="view_detail" class="btn pull-right Package_out" style="background-color:#008007; box-shadow: 0 3px 0 0 #006400;border: 0 none;color: #ffffff;width: 100%;" ><i class="fa fa-eye" aria-hidden="true"></i> View Detail</button></a>
						<% else %>
							<button type="button" class="btn pull-right Packages_out " style="background-color:#F5BA13;box-shadow: 0 3px 0 0 #a1790c;border: 0 none;color: #000;width: 100%;margin-bottom: 10px;" data-toggle="modal" data-target="#loginModal"><i class="fa fa-cart-plus" aria-hidden="true"></i> Add to cart</button><br>
						<a href="/stats/<%= @category_name %>/<%= @event_name %>"> <button type="button" name="view_detail" class="btn pull-right Package_out" style="background-color:#008007;box-shadow: 0 3px 0 0 #006400;border: 0 none;color: #ffffff;width: 100%;" ><i class="fa fa-eye" aria-hidden="true"></i> View Detail</button></a>
						<% end %>

					</div>


				</div>

			<%end%>


		<% end %>
	</div>

	<div class="test_ajax">
		<h3>hihihihiihihihii</h3>
	</div>



</section>

<style media="screen">
.irg {
	    box-shadow: 2px 1px 2px 1px #dcdcdc;
}

.tooltip {
	/*position: relative;*/
	/*display: inline-block;*/
	/*border-bottom: 1px dotted black;*/
}


@media screen and (min-device-width: 780px) and (max-device-width: 992px) {
	.equalTo {
		right: -9% !important;
	}

	/*#plus{
		left: 63% !important;
	}*/

	.col-md-6{
		width: 50%;
	}
}

	.top_rem{
		margin-top: 5px !important;
	}

@media screen and (min-device-width: 771px) and (max-device-width: 779px) {
	.col-md-6{
		width: 50%;
	}

	.equalTo {
		right: -8% !important;
	}

	.row_med{
		padding: 10px;
		padding-left: 3%;
	}
}

@media screen and (max-device-width: 764px) {
	.row_med{
		display: block !important;
		padding: 10px;
		padding-left: 5%;
		padding-right: 3%;
	}

	.row_med:hover{
	  box-shadow: unset !important;
	  border-radius: 0px !important;
	}
	.col-md-6{
		width: 50%;
	}

	.equalTo {
		left: -2% !important;
		top: 100% !important;
	}

	.ribbon{
		display: none;
	}


	.right_view{
		margin-top: 6% !important;
	}

 	.right_view h3 {
		text-align: center !important;
	}

	.right_view p {
		text-align: center !important;
	}

	.ibf img {
		height: 60% !important;
	}



}

@media screen and (min-device-width: 765px) and (max-device-width: 770px) {
	.col-md-6{
		width: 50%;
	}

	.equalTo {
		right: -8% !important;
	}

	.row_med{
		padding: 10px;
		padding-left: 1%;
		padding-right: 3%;
	}
}
/*
@media screen and (min-device-width: 576px) and (max-device-width: 689px) {
	.col-md-6{
		width: 50%;
	}

	.equalTo {
		right: -10% !important;
	}

	.row_med{

		padding: 10px;
		padding-left: 3%;
	}
}*/


/*.ribbon {
    font-size: 16px !important;
    width: 50%;
    position: relative;
    background: #118700;
    color: #fff;
    text-align: center;
    padding: 1em 2em;

}

.ribbon:before, .ribbon:after {
    content: "";
    position: absolute;
    display: block;
    bottom: -1em;
    border: 1.5em solid #008000;
    z-index: -1;
}

.ribbon:before {
    left: -2em;
    border-right-width: 1.5em;
    border-left-color: transparent;
}

.ribbon:after {
    right: -2em;
    border-left-width: 1.5em;
    border-right-color: transparent;
}

.ribbon .ribbon-contentenido:before, .ribbon .ribbon-contentenido:after {
    content: "";
    position: absolute;
    display: block;
    border-style: solid;
    border-color: #006400 transparent transparent transparent;
    bottom: -1em;
}

.ribbon .ribbon-contentenido:before {
    left: 0;
    border-width: 1em 0 0 1em;
}

.ribbon .ribbon-contentenido:after {
    right: 0;
    border-width: 1em 1em 0 0;
}*/


</style>
<script type="text/javascript">
	$(".Package_in").click(function(){
		$('#PackageModal').find('#item_uid').val($(this).data('item_uid'));
		$("#PackageModal").modal('show');
	});
	var cat_name = "";
	var clicked = 0;
	$(document).ready(function(){
		var url = $(location).attr('href');
		var test = url.split("/");
		get_event_data();
		// change this when uploading to kingdomsg/kingdomsg2018
		// alert(url);
		// alert(test[4]);
		//
		// console.log("this is it" );
		// console.log(test[5]);

		$("div.select_event select").val(test[4]);
		var event_name = $("select[name='event_name']").val();
		console.log(event_name);
		console.log("++++++++++++++");
		event(event_name);
		$("div.select_category select").val(test[5]);
		cat_name = test[5];
		$(document).on('click', "select[name='event_name']",function(){
			var event_name = $(this).val();
			clicked = 1;
			event(event_name);
			// $.ajax({
			// 	url: "/event_data/",
			// 	type: "post",
			// 	data: {event_name : event_name },
			// 	dataType: 'json',
			// 	success : function(response) {
			// 		console.log(response);
			// 		var category = '<option value=" ">Select Category</option>';
			// 		$.each(response, function(i,o){
			// 			category += "<option value='"+o+"'>" + o + "</option>"
			// 		});
			// 		$(".category_name").html(category);</a>
			// 	}
			// });
		});

		// $(document).on('click', "#fetch", function(){
		// 	$.ajax({
		// 		url: '/get_whole_data',
		// 		type: "post",
		// 		dataType: "json",
		// 		success : function(response){
		// 			console.log(response);
		// 			$("#text_try").val(response);
		// 		}
		// 	});
		// });

		$(document).on('click', "select[name='event_name'], select[name='category']", function(){
			var event_name = $("select[name='event_name']").val();
			clicked = 1;
			setTimeout(function(){
				var category = $("select[name='category']").val();
				var action_url = "/packages_info/"+event_name+"/"+ category
				$('.event_change').attr('action', action_url);
			}, 300);
			// var category = $("select[name='category']").val();
			// var action_url = "/packages_info/"+event_name+"/"+ category
			// $('.event_change').attr('action', action_url);
		});

		if (clicked == 0) {
			var url = $(location).attr('href');
			var test = url.split("/");
			var action_url = "/packages_info/"+test[4]+"/"+ test[5]
			$('.event_change').attr('action', action_url);
		}

	});






	function event(event_name){
		// alert(event_name);
		$.ajax({
			url: "/event_data/",
			type: "post",
			data: {event_name : event_name },
			dataType: 'json',
			success : function(response) {
				console.log(response);
				var category = '<option value="All_Categories" selected>Select Category</option>';
				$.each(response, function(i,o){
					category += "<option value='"+o+"'>" + o + "</option>"
				});
				$(".category_name").html(category);
				if(cat_name != ""){
					$('.category_name').val(cat_name);
					cat_name = "";
				}
			}
		});
	}


	function get_event_data(){
		$.ajax({
			url: "/pack_all",
			type: "get",
			dataType: 'text',
			success : function(response) {
				console.log(response);
				alert(response);

				// $(".test_ajax").html(print);
			}

		});
	}



</script>
<%= render 'layouts/footer'%>
